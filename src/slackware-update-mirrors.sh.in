#!/bin/sh


# sets script/package information
PACKAGE_NAME=`echo '@PACKAGE_NAME@' |sed -e 's/[@].*[@]//g'`
PACKAGE_VERSION=`echo '@PACKAGE_VERSION@' |sed -e 's/[@].*[@]//g'`
PACKAGE_BUGREPORT=`echo '@PACKAGE_BUGREPORT@' |sed -e 's/[@].*[@]//g'`


# parses CLI arguments
for FLAG in ${@};do
   if test "x${FLAG}" == "x--help";then
      echo "Usage: ${0} <address> <address> ... <address>"
      exit 0
   elif test "x${FLAG}" == "x--version";then
      echo "git-proj-stats.sh (${PACKAGE_NAME}) ${PACKAGE_VERSION}"
      echo "Copyright 2013 Bindle Binaries <${PACKAGE_BUGREPORT}>."
      echo ""
      exit 0
   fi
done


mkdir -p /pub/linux/slackware/ || exit 1

SLACK_MIRROR="mirrors1.kernel.org::slackware"
RSYNC_FLAGS="-a --delete --exclude source"

#SUBDIRS=("${SUBDIRS[@]}" "slackware-13.37")
#SUBDIRS=("${SUBDIRS[@]}" "slackware64-13.37")
#SUBDIRS=("${SUBDIRS[@]}" "slackware64-14.0")
SUBDIRS=("${SUBDIRS[@]}" "slackware-current")
SUBDIRS=("${SUBDIRS[@]}" "slackware64-current")

for SUBDIR in ${SUBDIRS[@]}; do
   echo "${SLACK_MIRROR}/${SUBDIR}/ ..."
   rsync ${RSYNC_FLAGS} ${@} \
      ${SLACK_MIRROR}/${SUBDIR}/  \
      /pub/linux/slackware/${SUBDIR} \
      || exit 1
done
